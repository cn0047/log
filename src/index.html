<html>
<head>
<title>Real time log</title>
<style>
  .blink {
    background-color: white;
    -webkit-animation-name: example;
    -webkit-animation-duration: 2s;
    animation-name: example;
    animation-duration: 2s;
  }
  @-webkit-keyframes example {
    0% {background-color: lightyellow;}
  }
  @keyframes example {
    0% {background-color: lightyellow;}
  }
</style>
</head>
<body>
<div id="root"></div>
<script src="https://realtimelog.herokuapp.com/socket.io/socket.io.js"></script>
<script>
  var socket = io.connect();
  var streamId = window.location.pathname.substring(1);
  var autoScrool = true;

  window.onscroll = function(e) {
    autoScrool = (
      (window.innerHeight + window.scrollY) >= document.body.offsetHeight
    );
  };

  socket.on('log', function(data) {
    if (data.streamId === streamId) {
      if (data.format === 'json') {
        var p = document.createElement('p');
        p.className = 'blink';
        p.innerHTML = JSON.stringify(data.data);
        document.getElementById('root').appendChild(p);
        if (autoScrool === true) {
          window.scrollTo(0, document.body.scrollHeight);
        }
      }
    }
  });
</script>
</body>
</html>
